<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" href="static/icons/favicon.ico">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-core.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-pie.min.js"></script>

    <link rel="stylesheet" href="../static/css/stylesheet.css">
    
    <title>Historic</title>
</head>
<body>
    <div class="header"></div>
    <div class="topnav">
        <a href="/dashboard">Dashboard</a>
        <a href="/historic">Historic</a>
        <a href="/alarms">Alarms</a>
    </div>
    <div class="row">
        <div class="card">
            <h2>Historic</h2>
            <h3 id="efficiency"></h3>
            <form>

                <select name="id" id="id-id">
                    <option value="" selected disabled> Robot ID </option>

                    {% for robot in robots %}
                        <option value={{ robot }}>{{ robot }}</option>
                    {% endfor %}

                </select>

                <label for="start">Start date:</label>

                <input type="datetime-local" id="start" name="start">

                <label for="end">End date:</label>

                <input type="datetime-local" id="end" name="end">
            </form>
        </div>
        
    </div>
    <script>
        //Run a function every 1000 ms
        window.setInterval(function(){
            efficiency();

        }, 1000);

        //Ajax requests

        // function efficiency() {
        //     //Ajax request
        //
        //     $.get('/api/historic/', function (data) {
        //
        //         dataObj = JSON.parse(data);
        //         console.log("Efficiency of robot")
        //         console.log(dataObj);
        //         $("#efficiency").html(data)
        //     });
        // }

        function efficiency() {
            //Ajax request

            $.get('/api/realstate/', function (data) {

                dataObj = JSON.parse(data);
                console.log("Efficiency of robot")
                console.log(dataObj);
                $("#efficiency").html(data)
            });
        }

        // //Web UI update
        //
        // function publish(currentState) {
        //     $("#elementID").html(currentState);
        // }



    </script>
</body>
</html>
